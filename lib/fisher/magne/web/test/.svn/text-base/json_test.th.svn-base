import unittest.*;
import json.*;

println("json test");

fun should_dump_object_to_string(){
  v = map();
  v['bar'] := map();
  v['bar']['foo'] := 1;
  json = encode(v);
  assertEquals(json, '{"bar":{"foo":1}}');
}

test(should_dump_object_to_string);

fun should_tokenize_string(){
  tokens = tokenize('{"foo":10}');
  assertEquals(tokens[0], {: index_from:0, index_to:1, type:"operator", value:"{" :});
  assertEquals(tokens[1], {: index_from:1, index_to:6, type:"string", value:"foo" :});
  assertEquals(tokens[2], {: index_from:6, index_to:7, type:"operator", value:":" :});
  assertEquals(tokens[3], {: index_from:7, index_to:9, type:"number", value:10 :});
  assertEquals(tokens[4], {: index_from:9, index_to:10, type:"operator", value:"}" :});

  tokens2 = tokenize("[]");
  assertEquals(tokens2[0], {: index_from:0, index_to:1, type:"operator", value: "[" :});
  assertEquals(tokens2[1], {: index_from:1, index_to:2, type:"operator", value: "]" :});
}
test(should_tokenize_string);

fun should_tokenize_array(){
  result = parse('[1,{"foo":2}]');
}
test(should_tokenize_array);


fun should_parse_json_object(){
  result = parse('{"foo":10}');
  assertEquals(result['foo'], 10);
}
test(should_parse_json_object);

fun should_parse_nested_json_object(){
  result = parse('{"foo":{"bar":10}}');
  assertEquals(result['foo']['bar'], 10);
}
test(should_parse_nested_json_object);

fun should_parse_empty_array(){
  result = parse('[]');
  assertEquals(result, []);
}
test(should_parse_empty_array);

fun should_parse_array(){
  result = parse('[1,{"foo":2}]');
  // COMMENT: the string representation of [1, {[foo,2]}] makes me think
  // of [foo, 2] as an array.
  assertEquals(result(0), 1);
  assertEquals(result(1)['foo'], 2);
}
test(should_parse_array);

fun should_parse_array_with_object(){
  result = parse('[{"foo":1}]');
  assertEquals(result(0)['foo'], 1);
}
test(should_parse_array_with_object);

fun should_parse_null(){
  result = parse('null');
  assertEquals(result, null);

  result2 = parse('[null]');
  assertEquals(result2(0), null);
}

test(should_parse_null);

fun should_parse_json_with_escapes(){
  json = '{"name":"\\"Aar\\u00f8e\\b\\f\\n\\r\\t"}';
  result = parse(json);
  assertEquals(result['name'], '"Aar√∏e\\b\\f\\n\\r\\t');
}

test(should_parse_json_with_escapes);

fun should_parse_negative_numbers(){
  json = '{"v":-1}';
  result = parse(json);
  assertEquals(result['v'], -1);
}
test(should_parse_negative_numbers);

fun should_parse_twitter_json_feed(){
  twitter_json = """[{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":null,"geo":null,"in_reply_to_user_id":null,"source":"web","contributors":null,"in_reply_to_screen_name":null,"truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":1570,"description":"Actor/Model/Activist/Astrologer","profile_sidebar_fill_color":"7AC3EE","followers_count":187,"location":"NYC","contributors_enabled":false,"time_zone":"Quito","friends_count":56,"profile_sidebar_border_color":"65B0DA","profile_image_url":"http://a3.twimg.com/profile_images/733266089/Photo_112_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"lizclairetaylor","lang":"en","favourites_count":1,"profile_text_color":"3D1957","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269553143/images/themes/theme10/bg.gif","created_at":"Wed Apr 01 20:01:47 +0000 2009","protected":false,"profile_link_color":"FF0000","name":"Elizabeth C. Taylor","following":null,"profile_background_tile":true,"id":28181076,"utc_offset":-18000,"profile_background_color":"642D8B","url":"http://www.elizabethclairetaylor.com"},"id":11370885814,"text":"this will have to do: http://www.youtube.com/watch?v=78FZdyM5-PI"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":null,"geo":null,"in_reply_to_user_id":null,"source":"<a href=\\"http://d.hatena.ne.jp/lynmock/20071107/p2\\" rel=\\"nofollow\\">P3:PeraPeraPrv</a>","contributors":null,"in_reply_to_screen_name":null,"truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":10119,"description":"\\u4e00\\u5fdc\\u5c31\\u8077\\u6d3b\\u52d5\\u4e2d\\u306a\\u306e\\u30ee\\u306e\\u3055\\u3093(\\u3082\\u3046\\u3059\\u30504\\u5e74\\u751f)\\u3002ruby\\u3068\\u304bphp\\u3068\\u304b\\u3067\\u3046\\u308d\\u3046\\u308d\\u3002\\u9069\\u5f53\\u304a\\u7d75\\u63cf\\u304d\\u30a2\\u30a4\\u30b3\\u30f3\\u3002\\u30af\\u30e9\\u30b9\\u30bf\\uff1alist\\uff0b\\u6df1\\u591c\\u30a2\\u30cb\\u30e1\\u5b9f\\u6cc1\\u3002\\u5b9f\\u6cc1post\\u306b\\u3088\\u308bTL\\u57cb\\u3081\\u306b\\u3054\\u6ce8\\u610f\\u3002D\\u3001reply\\u3001follow/remove\\u306f\\u3054\\u81ea\\u7531\\u306b\\u3002\\u5e83\\u544a\\u3068\\u601d\\u308f\\u3057\\u304d\\u3082\\u306e\\u306fblock\\u3057\\u307e\\u3059\\u3002\\u30cb\\u30b3\\u30cb\\u30b3\\u5b9a\\u70b9\\u89b3\\u6e2c\\u03b2(@ncot_) \\u3068\\u304b\\u3092\\u4f5c\\u3063\\u305f\\u4eba\\u3002","profile_sidebar_fill_color":"e0ff92","followers_count":422,"location":"Kanagawa ,Yokohama or Fujisawa","contributors_enabled":false,"time_zone":"Tokyo","friends_count":553,"profile_sidebar_border_color":"87bc44","profile_image_url":"http://a3.twimg.com/profile_images/774249871/hizumi_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"hizumi","lang":"en","favourites_count":86,"profile_text_color":"000000","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269553143/images/themes/theme1/bg.png","created_at":"Tue Aug 14 18:01:08 +0000 2007","protected":false,"profile_link_color":"0000ff","name":"\\u3072\\u305a\\u307f","following":null,"profile_background_tile":false,"id":8187172,"utc_offset":32400,"profile_background_color":"9ae4e8","url":"http://hizwarp.net"},"id":11370885808,"text":"\\u5165\\u9662\\u3059\\u308b\\u3088\\uff01\\uff08\\u3041"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370783604,"geo":null,"in_reply_to_user_id":90609613,"source":"web","contributors":null,"in_reply_to_screen_name":"kuroi_Bot","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":864,"description":"\\u5e38\\u306b\\u7a7a\\u6c17\\u3002\\u305d\\u306e\\u4ee3\\u308f\\u308a\\u307e\\u308f\\u308a\\u306b\\u306f\\u5438\\u308f\\u308c\\u307e\\u305b\\u3093\\u3002\\r\\n\\r\\n\\u30d5\\u30a9\\u30ed\\u30fc\\u3055\\u308c\\u305f\\u65b9\\u57fa\\u672c\\u7684\\u306b\\u8fd4\\u3057\\u307e\\u3059\\u3002\\u3042\\u3041\\u9762\\u5012\\u81ed\\u305b\\u3047\\u3001\\u3068\\u601d\\u3063\\u305f\\u65b9\\u306f\\u9069\\u5f53\\u306b\\u5bfe\\u51e6\\u3057\\u3066\\u304f\\u3060\\u3055\\u3044\\u307e\\u3057\\u3002\\r\\n\\u58ca\\u308c\\u305f\\u5fc3\\u3092\\u3053\\u3053\\u3067\\u66dd\\u3051\\u51fa\\u3057\\u3066\\u3044\\u307e\\u3059\\u3002\\r\\nbot\\u76f8\\u624b\\u306b\\u8abf\\u5b50\\u306b\\u4e57\\u308a\\u3059\\u304e\\u305f\\u3002\\u3054\\u3081\\u3093\\u306a\\u3055\\u3044","profile_sidebar_fill_color":"DAECF4","followers_count":32,"location":"\\u673d\\u3061\\u679c\\u3066\\u305f\\u5927\\u5730","contributors_enabled":false,"time_zone":"Tokyo","friends_count":59,"profile_sidebar_border_color":"C6E2EE","profile_image_url":"http://a3.twimg.com/profile_images/516131151/sesna_normal.png","notifications":null,"geo_enabled":false,"screen_name":"ZeroAngel000","lang":"ja","favourites_count":12,"profile_text_color":"663B12","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269983132/images/themes/theme2/bg.gif","created_at":"Thu Aug 20 08:08:25 +0000 2009","protected":false,"profile_link_color":"1F98C7","name":"\\u95a2\\u6d77\\u6597","following":null,"profile_background_tile":false,"id":67261589,"utc_offset":32400,"profile_background_color":"C6E2EE","url":"http://zeroangel000.blog29.fc2.com/"},"id":11370885795,"text":"@kuroi_Bot \\u6700\\u8fd1\\u59ff\\u3092\\u898b\\u306a\\u3044\\u3068\\u601d\\u3063\\u305f\\u3089\\u30fb\\u30fb\\u30fb\\u30bf\\u30a4\\u3060\\u304b\\u30d9\\u30c8\\u30ca\\u30e0\\u3067\\u6027\\u8ee2\\u63db\\u624b\\u8853\\u3092\\u3046\\u3051\\u3066\\u3089\\u3057\\u305f\\u306e\\u3067\\u3059\\u304b\\uff01"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":null,"geo":null,"in_reply_to_user_id":92803826,"source":"<a href=\\"/devices\\" rel=\\"nofollow\\">txt</a>","contributors":null,"in_reply_to_screen_name":"dangerassanau","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":2094,"description":"","profile_sidebar_fill_color":"ffffff","followers_count":86,"location":"wesstward .","contributors_enabled":false,"time_zone":"Pacific Time (US & Canada)","friends_count":150,"profile_sidebar_border_color":"0d1214","profile_image_url":"http://a1.twimg.com/profile_images/767668024/Tribaal_Lady_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"DaddyDime","lang":"en","favourites_count":1,"profile_text_color":"c91818","verified":false,"profile_background_image_url":"http://a3.twimg.com/profile_background_images/80022595/cuuuuuuuuuuuuutttttttttttttttt.JPG","created_at":"Wed Nov 11 22:24:28 +0000 2009","protected":false,"profile_link_color":"1a2124","name":"asia morgado","following":null,"profile_background_tile":true,"id":89300225,"utc_offset":-28800,"profile_background_color":"6e6464","url":"http://asiasyomaster.tumblr.com/"},"id":11370885779,"text":"@dangerassanau, where ? librewayne&lt;3"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370299459,"geo":null,"in_reply_to_user_id":7607372,"source":"web","contributors":null,"in_reply_to_screen_name":"casiotones","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":1349,"description":"Si te comes una garrapata, sabe a centollo. ","profile_sidebar_fill_color":"252429","followers_count":37,"location":"","contributors_enabled":false,"time_zone":null,"friends_count":48,"profile_sidebar_border_color":"181A1E","profile_image_url":"http://a3.twimg.com/profile_images/125284963/P4250005_normal.JPG","notifications":null,"geo_enabled":false,"screen_name":"Gateando","lang":"en","favourites_count":0,"profile_text_color":"666666","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269553143/images/themes/theme9/bg.gif","created_at":"Wed Mar 25 20:39:02 +0000 2009","protected":false,"profile_link_color":"2FC2EF","name":"Gordi","following":null,"profile_background_tile":false,"id":26585272,"utc_offset":null,"profile_background_color":"1A1B1F","url":null},"id":11370885778,"text":"@casiotones \\u00bfEs que alguien cre\\u00eda que Ricky martin era hetero? Gracias por calificar mis mierdas de comentarios como humor."},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11298510096,"geo":null,"in_reply_to_user_id":36947017,"source":"<a href=\\"http://www.hootsuite.com\\" rel=\\"nofollow\\">HootSuite</a>","contributors":null,"in_reply_to_screen_name":"iam_KP","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":71,"description":"Part of a wildly exciting church in a pub in Conwy, North Wales","profile_sidebar_fill_color":"95E8EC","followers_count":18,"location":"Conwy","contributors_enabled":false,"time_zone":null,"friends_count":38,"profile_sidebar_border_color":"5ED4DC","profile_image_url":"http://a1.twimg.com/profile_images/711237564/SteveO1_normal.JPG","notifications":false,"geo_enabled":false,"screen_name":"i61Pastor","lang":"en","favourites_count":1,"profile_text_color":"3C3940","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269020849/images/themes/theme4/bg.gif","created_at":"Mon Feb 22 08:46:16 +0000 2010","protected":false,"profile_link_color":"0099B9","name":"Stephen Houghton","following":false,"profile_background_tile":false,"id":116394681,"utc_offset":null,"profile_background_color":"0099B9","url":"http://www.i61church.blog.co.uk"},"id":11370885761,"text":"@iam_KP How r U??"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370867760,"geo":null,"in_reply_to_user_id":15872256,"source":"<a href=\\"http://www.twittergadget.com\\" rel=\\"nofollow\\">TwitterGadget</a>","contributors":null,"in_reply_to_screen_name":"misterand3rson","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":1764,"description":"Photographer. Coach. Dude.","profile_sidebar_fill_color":"252429","followers_count":121,"location":"\\u00dcT: 45.484041,-122.383233","contributors_enabled":false,"time_zone":"Alaska","friends_count":62,"profile_sidebar_border_color":"181A1E","profile_image_url":"http://a1.twimg.com/profile_images/628037670/twitterProfilePhoto_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"joebeephotos","lang":"en","favourites_count":1,"profile_text_color":"666666","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269281712/images/themes/theme9/bg.gif","created_at":"Thu Mar 06 21:34:46 +0000 2008","protected":false,"profile_link_color":"2FC2EF","name":"Joe Berninghausen","following":null,"profile_background_tile":false,"id":14091517,"utc_offset":-32400,"profile_background_color":"1A1B1F","url":"http://www.flickr.com/photos/joebee"},"id":11370885756,"text":"@misterand3rson good man!"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11318345480,"geo":null,"in_reply_to_user_id":94910895,"source":"web","contributors":null,"in_reply_to_screen_name":"erykynho","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":17,"description":"","profile_sidebar_fill_color":"FFF7CC","followers_count":3,"location":"","contributors_enabled":false,"time_zone":"Greenland","friends_count":32,"profile_sidebar_border_color":"F2E195","profile_image_url":"http://a3.twimg.com/profile_images/707545721/OgAAAHXoPMZTKMr0Iv2yZ3UtYwBuvQ5cGGB9Qpc3kBCmObg7scSQTjBD5op05ErfkL5FvyAhzVLynySFSwSYgtimy4wAm1T1UBz7dMxF9HjcTsnJ9Gic5iC8ZJtk_1__normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"angellstop","lang":"es","favourites_count":0,"profile_text_color":"0C3E53","verified":false,"profile_background_image_url":"http://a3.twimg.com/profile_background_images/84707319/OgAAAH820bhV4AuKalxZ7VyywwTpHJb86-EhrDFCrf0nefouBykiD9s8W5xV3ir4pIjVoFeUtx2Jnjczu9NbtmUYem0Am1T1UGGYShVMuCMMjR79sUQfNi7O7ZXA_1_.jpg","created_at":"Mon Jan 18 12:45:53 +0000 2010","protected":false,"profile_link_color":"FF0000","name":"angellstop","following":null,"profile_background_tile":true,"id":106080634,"utc_offset":-10800,"profile_background_color":"BADFCD","url":null},"id":11370885755,"text":"@erykynho :0 OBLIGADOOOOOOOOOOOO E AWE QUANDU VEM PLA KA???"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370535600,"geo":null,"in_reply_to_user_id":113342104,"source":"web","contributors":null,"in_reply_to_screen_name":"saadiasouza","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":765,"description":"*Claudia Magn\\u00f3lia de Almeida Freitas*. Meg, Claudinha e Cal - de vez em quando. Cacau muito raramente.Jornalista.","profile_sidebar_fill_color":"e0c7a8","followers_count":150,"location":"Cama\\u00e7ari...Salvador...Bahia","contributors_enabled":false,"time_zone":"Santiago","friends_count":263,"profile_sidebar_border_color":"ebe4e9","profile_image_url":"http://a1.twimg.com/profile_images/705524482/259_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"claudiamagnolia","lang":"en","favourites_count":1,"profile_text_color":"940c74","verified":false,"profile_background_image_url":"http://a3.twimg.com/profile_background_images/87695383/Magnolia_Wedding____by_Lena_Lou.jpg","created_at":"Sun Jun 28 14:59:19 +0000 2009","protected":false,"profile_link_color":"D02B55","name":"Claudia Magn\\u00f3lia ","following":null,"profile_background_tile":true,"id":51748647,"utc_offset":-14400,"profile_background_color":"f099cd","url":"http://www.claudiamagnolia.blogspot.com\\\\"},"id":11370885753,"text":"@saadiasouza T\\u00e1 repreendido! hahaha"},{"place":null,"coordinates":null,"in_reply_to_screen_name":"themegamactv","geo":null,"in_reply_to_user_id":16576158,"source":"<a href=\\"http://twitterrific.com\\" rel=\\"nofollow\\">Twitterrific</a>","favorited":false,"truncated":false,"contributors":null,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"description":";D","profile_sidebar_fill_color":"E6F6F9","location":"Hong Kong","followers_count":99,"statuses_count":1396,"time_zone":"Hong Kong","profile_sidebar_border_color":"DBE9ED","profile_image_url":"http://a3.twimg.com/profile_images/782610831/IMG_0242_normal.jpg","notifications":false,"friends_count":185,"contributors_enabled":false,"screen_name":"Frederick76","lang":"en","favourites_count":2,"profile_text_color":"333333","profile_background_image_url":"http://a1.twimg.com/profile_background_images/66142484/untitled.PNG","created_at":"Thu Jul 09 07:55:51 +0000 2009","protected":false,"geo_enabled":true,"profile_link_color":"CC3366","name":"Fred Chan","following":false,"profile_background_tile":false,"id":55176701,"verified":false,"utc_offset":28800,"profile_background_color":"7a7774","url":null},"id":11370885750,"in_reply_to_status_id":11370567505,"text":"@themegamactv omg lucky you! Business class :( and hope i'm lucky enough to win them!"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370089207,"geo":null,"in_reply_to_user_id":5078241,"source":"<a href=\\"http://www.atebits.com/\\" rel=\\"nofollow\\">Tweetie</a>","contributors":null,"in_reply_to_screen_name":"MarrvelousM","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":21719,"description":"vegan martha stewart gone horribly wrong","profile_sidebar_fill_color":"e0ff92","followers_count":824,"location":"Philly","contributors_enabled":false,"time_zone":"Eastern Time (US & Canada)","friends_count":147,"profile_sidebar_border_color":"87bc44","profile_image_url":"http://a1.twimg.com/profile_images/719834574/n18914274_33431170_400_normal.jpg","notifications":null,"geo_enabled":false,"screen_name":"NJrugger45","lang":"en","favourites_count":2097,"profile_text_color":"000000","verified":false,"profile_background_image_url":"http://a1.twimg.com/profile_background_images/2323174/hurts.jpg","created_at":"Mon Jan 21 04:45:17 +0000 2008","protected":false,"profile_link_color":"0000ff","name":"NJrugger45","following":null,"profile_background_tile":true,"id":12481592,"utc_offset":-18000,"profile_background_color":"9ae4e8","url":"http://thepistolinbedthirteen.blogspot.com"},"id":11370885746,"text":"@MarrvelousM I think it's a very limited comparison personally. He references Warhol, Prince & Michael Jackson, among others, as well."},{"place":null,"favorited":false,"coordinates":null,"in_reply_to_user_id":99705372,"geo":null,"source":"<a href=\\"http://echofon.com/\\" rel=\\"nofollow\\">Echofon</a>","truncated":false,"in_reply_to_screen_name":"GillianGory","created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"followers_count":205,"description":"Hi. I'm danielle (: I love music, my friends and chris :3 I'm related to @GillianGory somehow (: we just don't know yet :L \\n\\nfollow me!! I follow back 3 ","statuses_count":1782,"profile_sidebar_fill_color":"697a70","location":"55.81933,-4.432991","friends_count":311,"contributors_enabled":false,"time_zone":"Edinburgh","profile_sidebar_border_color":"05ff69","profile_image_url":"http://a3.twimg.com/profile_images/784116547/Danielle_Roar_normal.jpg","notifications":false,"favourites_count":0,"screen_name":"Danielle_Roar","lang":"en","geo_enabled":false,"profile_text_color":"05ff69","profile_background_image_url":"http://a3.twimg.com/profile_background_images/76044013/JAGK.jpg","created_at":"Thu Apr 23 15:26:44 +0000 2009","protected":false,"verified":false,"profile_link_color":"1c0019","name":"danielle mcalonan","following":false,"profile_background_tile":false,"id":34640319,"utc_offset":0,"profile_background_color":"faedfa","url":"http://www.bebo.com/danimca"},"id":11370885745,"contributors":null,"in_reply_to_status_id":null,"text":"@GillianGory is amazing (: please follow her guys :3"},{"place":null,"in_reply_to_screen_name":null,"coordinates":null,"contributors":null,"in_reply_to_user_id":null,"geo":null,"favorited":false,"source":"<a href=\\"http://apiwiki.twitter.com/\\" rel=\\"nofollow\\">API</a>","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"followers_count":10,"description":"\\u30b2\\u30fc\\u30e0\\u300cVALKYRIE PROFILE2 -SILMERIA-\\u300d\\u306e\\u975e\\u516c\\u5f0fbot(\\u4e8c\\u6b21\\u5275\\u4f5c\\u542b)\\u3067\\u3059\\u3002\\u307e\\u3060\\u307e\\u3060\\u8a66\\u904b\\u8ee2\\u4e2d\\u3002\\u8a73\\u3057\\u304f\\u306f\\u4e0a\\u306eURL\\u307e\\u3067\\u25c7\\u304a\\u5225\\u308c\\u3059\\u308b\\u5834\\u5408\\u306f\\uff62\\u30ea\\u30e0\\u30fc\\u30d6\\uff63\\u3067\\u306f\\u306a\\u304f\\uff62\\u30d6\\u30ed\\u30c3\\u30af\\uff63\\u3067\\u304a\\u9858\\u3044\\u3057\\u307e\\u3059\\u25c7(\\u4f5c\\u6210\\u8005 @bekaro)","statuses_count":2463,"profile_sidebar_fill_color":"A0C5C7","location":"\\u3069\\u3053\\u304b","friends_count":1,"contributors_enabled":false,"time_zone":"Hawaii","profile_sidebar_border_color":"86A4A6","profile_image_url":"http://a3.twimg.com/profile_images/679556031/2010y02m06d_235307109_normal.jpg","notifications":false,"favourites_count":0,"screen_name":"Rufus_vp2_bot","lang":"ja","geo_enabled":false,"profile_text_color":"333333","profile_background_image_url":"http://s.twimg.com/a/1269020849/images/themes/theme6/bg.gif","created_at":"Sat Feb 06 15:32:19 +0000 2010","protected":false,"verified":false,"profile_link_color":"FF3300","name":"\\u30eb\\u30fc\\u30d5\\u30a1\\u30b9","following":false,"profile_background_tile":false,"id":111912000,"utc_offset":-36000,"profile_background_color":"709397","url":"http://bekaro.blog64.fc2.com/blog-entry-473.html"},"id":11370885726,"in_reply_to_status_id":null,"text":"\\u6025\\u6240\\u3092\\u5916\\u3057\\u305f\\u304b\\uff65\\uff65\\uff65\\u307e\\u305a\\u3044\\u306a"},{"contributors":null,"place":null,"coordinates":null,"favorited":false,"in_reply_to_user_id":null,"geo":null,"source":"web","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"followers_count":169,"description":"Democratic Party of Milwaukee County","statuses_count":690,"profile_sidebar_fill_color":"DDEEF6","location":"Milwaukee","friends_count":16,"contributors_enabled":false,"time_zone":"Central Time (US & Canada)","profile_sidebar_border_color":"C0DEED","profile_image_url":"http://a3.twimg.com/profile_images/534668863/donkey_150_normal.jpg","notifications":false,"favourites_count":0,"screen_name":"mkedems","lang":"en","geo_enabled":false,"profile_text_color":"333333","profile_background_image_url":"http://a3.twimg.com/profile_background_images/54806111/donkey_embossed.jpg","created_at":"Tue May 19 18:53:38 +0000 2009","protected":false,"verified":false,"profile_link_color":"0084B4","name":"Milwaukee Dem Party","following":false,"profile_background_tile":true,"id":41180730,"utc_offset":-21600,"profile_background_color":"c0deed","url":"http://milwaukeedems.org"},"in_reply_to_screen_name":null,"id":11370885714,"in_reply_to_status_id":null,"text":"Help Train the Next Generation of Democratic Leaders! - http://eepurl.com/m1yX"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":null,"geo":null,"in_reply_to_user_id":null,"source":"web","contributors":null,"in_reply_to_screen_name":null,"truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":24,"description":"\\u30aa\\u30bf\\u30af\\u8150\\u5973\\u5b50\\u79d1^^aph\\u306e\\u9aed\\u304a\\u5144\\u3055\\u3093\\u3068\\u7709\\u6bdb\\u3061\\u3093\\u3061\\u304f\\u308a\\u3093\\u91ce\\u90ce\\u304c\\u5927\\u597d\\u304d\\u3067\\u3059~\\u30d5\\u30a9\\u30ed\\u30fc\\u306a\\u3069\\u304a\\u6c17\\u8efd\\u306b\\u3069\\u3046\\u305e\\uff01\\u30c1\\u30e3\\u30c3\\u30af\\u5168\\u958b\\u3067\\u307e\\u3063\\u3066\\u307e\\u3059\\u2764","profile_sidebar_fill_color":"E5507E","followers_count":9,"location":"\\u65e5\\u672c","contributors_enabled":false,"time_zone":"Tokyo","friends_count":9,"profile_sidebar_border_color":"CC3366","profile_image_url":"http://a1.twimg.com/profile_images/707793582/uiui_________normal.png","notifications":null,"geo_enabled":false,"screen_name":"tmtmpmpm","lang":"ja","favourites_count":0,"profile_text_color":"362720","verified":false,"profile_background_image_url":"http://a1.twimg.com/profile_background_images/76958880/125272_prof.png","created_at":"Tue Nov 24 17:18:43 +0000 2009","protected":false,"profile_link_color":"B40B43","name":"\\u3068\\u308a\\u3082\\u3061","following":null,"profile_background_tile":true,"id":92318212,"utc_offset":32400,"profile_background_color":"FF6699","url":null},"id":11370885711,"text":"\\u3069\\u3044\\u3064\\u3082\\u3053\\u3044\\u3064\\u3082\\u79c1\\u306e\\u30df\\u30eb\\u30ad\\u30fc\\u30ed\\u30fc\\u30eb\\u72d9\\u3063\\u3066\\u3084\\u304c\\u308b\\u2026\\uff01"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":11370740376,"geo":null,"in_reply_to_user_id":62066435,"source":"web","contributors":null,"in_reply_to_screen_name":"rickliima","truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":146,"description":"","profile_sidebar_fill_color":"7AC3EE","followers_count":126,"location":"Presidente Prudente - Brasil","contributors_enabled":false,"time_zone":"Santiago","friends_count":263,"profile_sidebar_border_color":"65B0DA","profile_image_url":"http://a3.twimg.com/profile_images/405272769/DSC00327_normal.JPG","notifications":null,"geo_enabled":false,"screen_name":"FraanCordeiro","lang":"en","favourites_count":0,"profile_text_color":"3D1957","verified":false,"profile_background_image_url":"http://s.twimg.com/a/1269553143/images/themes/theme10/bg.gif","created_at":"Tue Sep 08 22:05:28 +0000 2009","protected":false,"profile_link_color":"FF0000","name":"Francini Cordeiro ","following":null,"profile_background_tile":true,"id":72682973,"utc_offset":-14400,"profile_background_color":"642D8B","url":null},"id":11370885703,"text":"@rickliima O melhor foi o da Sir\\u00ed e o Alem\\u00e3o! *-*"},{"contributors":null,"place":null,"coordinates":null,"in_reply_to_screen_name":null,"geo":null,"in_reply_to_user_id":null,"source":"<a href=\\"http://apiwiki.twitter.com/\\" rel=\\"nofollow\\">API</a>","favorited":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"contributors_enabled":false,"description":"Hi, I'm Stanley. I'm a real estate agent in San Diego County. I'm looking to network with people around the county.","geo_enabled":false,"profile_sidebar_fill_color":"e0ff92","location":"Encinitas, California 92024","verified":false,"time_zone":"Alaska","profile_sidebar_border_color":"87bc44","profile_image_url":"http://a1.twimg.com/profile_images/521043304/MyThumbnail_normal.jpg","notifications":null,"screen_name":"SChambers2","lang":"en","profile_text_color":"000000","followers_count":248,"profile_background_image_url":"http://s.twimg.com/a/1269553143/images/themes/theme1/bg.png","created_at":"Wed Nov 11 08:11:18 +0000 2009","protected":false,"friends_count":256,"profile_link_color":"0000ff","name":"Stanley Chambers","statuses_count":313,"following":null,"profile_background_tile":false,"id":89136950,"utc_offset":-32400,"favourites_count":0,"profile_background_color":"9ae4e8","url":"http://www.ehomepost.com/StanleyChambers"},"in_reply_to_status_id":null,"truncated":false,"id":11370885698,"text":"http://feedzilla.com/r/F0F6A71760D0856F07EED9E442081C38FCE5A686 - Mortgage mods for profit (source: Bankrate)"},{"place":null,"coordinates":null,"favorited":false,"in_reply_to_status_id":null,"geo":null,"in_reply_to_user_id":null,"source":"web","contributors":null,"in_reply_to_screen_name":null,"truncated":false,"created_at":"Wed Mar 31 15:07:22 +0000 2010","user":{"statuses_count":750,"description":"\\u5c31\\u6d3b\\u306e\\u3053\\u3068\\u3068\\u304b\\u30b8\\u30e3\\u30f3\\u30d7\\u3068\\u304bFF\\u3068\\u304b\\u305d\\u306e\\u4ed6\\u3082\\u308d\\u3082\\u308d\\u3059\\u304d\\u306a\\u3053\\u3068\\u3092\\u3064\\u3076\\u3084\\u304f\\u305c\\u3043\\u3002\\r\\n\\u5c31\\u6d3bBLOG\\u2193\\r\\nhttp://ameblo.jp/syukatukiroku/","profile_sidebar_fill_color":"e0d89c","followers_count":82,"location":"\\u798f\\u5ca1\\u770c","contributors_enabled":false,"time_zone":"Osaka","friends_count":101,"profile_sidebar_border_color":"917109","profile_image_url":"http://a3.twimg.com/profile_images/654393707/tento_normal.png","notifications":null,"geo_enabled":false,"screen_name":"asagi__","lang":"ja","favourites_count":20,"profile_text_color":"333333","verified":false,"profile_background_image_url":"http://a3.twimg.com/profile_background_images/85922809/bg.gif","created_at":"Mon Jan 25 14:08:34 +0000 2010","protected":false,"profile_link_color":"736200","name":"\\u3042\\u3055\\u304e","following":null,"profile_background_tile":false,"id":108300506,"utc_offset":32400,"profile_background_color":"ffffff","url":"http://bookstyle.e-whs.net"},"id":11370885683,"text":"4\\u6708\\u304b\\u30fb\\u30fb\\u30fb1\\uff5e3\\u6708\\u306e\\u3084\\u3064\\u3089\\u3069\\u3053\\u306b\\u884c\\u3063\\u3061\\u3083\\u3063\\u305f\\u3093\\u3060\\u308d\\u3046\\u3002\\u6700\\u8fd1\\u898b\\u3066\\u306a\\u3044\\u3093\\u3060\\u3051\\u3069\\u3002"},{"place":null,"coordinates":null,"in_reply_to_screen_name":"jbsdreamworld","geo":null,"source":"web","truncated":false,"in_reply_to_user_id":46149393,"created_at":"Wed Mar 31 15:07:22 +0000 2010","contributors":null,"user":{"description":"\\u2665\\u2665\\u2665 I absolutley LOVES JUSTIN BIEBER. He is my life, my love, and my husband ! We got married last year !!! (lol) Justins following me u should too !\\u2665\\u2665\\u2665","profile_sidebar_fill_color":"000000","followers_count":1303,"location":"\\u2665In Justin's Heart ;)\\u2665","time_zone":"Quito","friends_count":1148,"profile_sidebar_border_color":"fcfcfc","profile_image_url":"http://a3.twimg.com/profile_images/782256987/me_normal.jpg","statuses_count":4908,"notifications":null,"favourites_count":59,"screen_name":"MrsBelieber","contributors_enabled":false,"lang":"en","profile_text_color":"883deb","geo_enabled":false,"profile_background_image_url":"http://a3.twimg.com/profile_background_images/87528099/Picture_4.jpg","created_at":"Sun Oct 25 19:10:13 +0000 2009","protected":false,"profile_link_color":"e09bde","name":"\\u221aVerified \\u2665MrsBieber","following":null,"verified":false,"profile_background_tile":true,"id":85143832,"utc_offset":-18000,"profile_background_color":"C0DEED","url":"http://www.facebook.com/home.php?"},"in_reply_to_status_id":11370778188,"id":11370885682,"favorited":false,"text":"@jbsdreamworld follow me ?"},{"place":null,"coordinates":null,"in_reply_to_screen_name":null,"geo":null,"source":"<a href=\\"http://www.sportsfanlive.com\\" rel=\\"nofollow\\">SportsFanLive</a>","truncated":false,"in_reply_to_user_id":null,"created_at":"Wed Mar 31 15:07:22 +0000 2010","contributors":null,"user":{"description":null,"profile_sidebar_fill_color":"e0ff92","followers_count":17,"location":null,"time_zone":null,"friends_count":0,"profile_sidebar_border_color":"87bc44","profile_image_url":"http://s.twimg.com/a/1269387398/images/default_profile_0_normal.png","statuses_count":166,"notifications":null,"favourites_count":0,"screen_name":"Astros_Live","contributors_enabled":false,"lang":"en","profile_text_color":"000000","geo_enabled":false,"profile_background_image_url":"http://s.twimg.com/a/1269387398/images/themes/theme1/bg.png","created_at":"Thu Feb 04 02:21:24 +0000 2010","protected":false,"profile_link_color":"0000ff","name":"Astros_Live","following":null,"verified":false,"profile_background_tile":false,"id":111186033,"utc_offset":null,"profile_background_color":"9ae4e8","url":null},"in_reply_to_status_id":null,"id":11370885680,"favorited":false,"text":"(Houston Chronicle) Don't panic: Despite trip to DL Berkman still on schedule: http://bit.ly/98Wrm5"}]""";
    result = parse(twitter_json);
  assertEquals(result(0)['place'], null);
  assertEquals(result(0)['created_at'], "Wed Mar 31 15:07:22 +0000 2010");
}

test(should_parse_twitter_json_feed);


